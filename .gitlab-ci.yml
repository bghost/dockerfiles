image: docker:latest
services:
    - docker:dind


before_script:
    - apk upgrade -U && apk add bash
    - docker login -u gitlab-ci-token -p $CI_JOB_TOKEN $CI_REGISTRY

chromium:edge:
    script:
        - cd chromium
        - export REGISTRY="registry.gitlab.com/bghost/dockerfiles/"
        - export ID=1000
        - export GID=1000
        - export PLUGDEV=240
        - bash ./build edge

chromium:sid:
    script:
        - cd chromium
        - export REGISTRY="registry.gitlab.com/bghost/dockerfiles/"
        - export ID=1000
        - export GID=1000
        - export PLUGDEV=240
        - bash ./build sid

firefox:rawhide:
    script:
        - cd firefox
        - export REGISTRY="registry.gitlab.com/bghost/dockerfiles/"
        - export ID=1000
        - export GID=1000
        - export PLUGDEV=240
        - bash ./build rawhide

firefox:disco:
    script:
        - cd firefox
        - export REGISTRY="registry.gitlab.com/bghost/dockerfiles/"
        - export ID=1000
        - export GID=1000
        - export PLUGDEV=240
        - bash ./build disco

libreoffice:edge:
    script:
        - cd libreoffice
        - export REGISTRY="registry.gitlab.com/bghost/dockerfiles/"
        - export ID=1000
        - export GID=1000
        - bash ./build edge

signal-desktop:bionic:
    script:
        - cd signal-desktop
        - export REGISTRY="registry.gitlab.com/bghost/dockerfiles/"
        - export ID=1000
        - export GID=1000
        - bash ./build bionic
