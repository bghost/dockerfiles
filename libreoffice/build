#!/bin/bash

set -euo pipefail

registry=
user='bghost'
repo='libreoffice'
tag=${1:-edge}

# set environment vars
export GID=$(id -g)
export ID=$(id -u)

# build the container:
docker build \
    --build-arg GID=${GID} \
    --build-arg ID=${ID} \
    -t ${registry}${user}/${repo}:${tag} $(find . -type d -name ${tag})

# clean up our host environment
unset {GID,ID}
